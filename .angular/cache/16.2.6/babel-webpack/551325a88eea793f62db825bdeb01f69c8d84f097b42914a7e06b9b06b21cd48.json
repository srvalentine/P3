{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Duoc/Desktop/master/carlos_rama/P3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../services/location.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction RegistroPage_ion_select_option_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", i_r2.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i_r2.nombre);\n  }\n}\nfunction RegistroPage_ion_select_option_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", i_r3.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i_r3.nombre);\n  }\n}\nlet RegistroPage = /*#__PURE__*/(() => {\n  class RegistroPage {\n    constructor(navCtrl, toastCtrl, authService, router, locationService) {\n      this.navCtrl = navCtrl;\n      this.toastCtrl = toastCtrl;\n      this.authService = authService;\n      this.router = router;\n      this.locationService = locationService;\n      this.username = '';\n      this.password = '';\n      this.cpassword = '';\n      this.name = '';\n      this.lname = '';\n      this.rut = '';\n      this.car = '';\n      this.regionSel = 0;\n      this.comunaSel = 0;\n      this.seleccionComuna = true;\n      this.regiones = [];\n      this.comunas = [];\n    }\n    registrarse() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (_this.username === '' || _this.password === '' || _this.cpassword === '' || _this.name === '' || _this.lname === '' || _this.rut === '' || _this.car === '' || _this.regionSel === 0 || _this.comunaSel === 0) {\n          _this.showToast('Por favor, complete todos los campos');\n          return;\n        }\n        if (_this.rut.length != 8 && isNaN(+_this.password)) {\n          _this.showToast('El rut no debe de contener guion ni digito verificador.');\n          return;\n        }\n        if (_this.username.length < 4 && _this.username.length > 8) {\n          _this.showToast('El nombre de usuario debe contener 4 a 8 caracteres.');\n          return;\n        }\n        if (_this.password.length < 4 && _this.username.length > 8) {\n          _this.showToast('La contraseña debe ser un número de 4 dígitos.');\n          return;\n        }\n        if (_this.name.length <= 1 && _this.username.length > 8) {\n          _this.showToast('El nombre debe contener 4 a 8 caracteres.');\n          return;\n        }\n        if (_this.lname.length <= 1 && _this.password.length > 8) {\n          _this.showToast('El apellido debe contener 4 a 8 caracteres.');\n          return;\n        }\n        if (_this.car.length <= 1) {\n          _this.showToast('Ingrese una carrera valida.');\n          return;\n        }\n        if (_this.password !== _this.cpassword) {\n          _this.showToast('Las contraseñas deben de ser iguales.');\n          return;\n        }\n        try {\n          const registroExitoso = yield _this.authService.registro(_this.username, _this.password, _this.name, _this.lname, _this.rut, _this.car, _this.regionSel, _this.comunaSel);\n          if (registroExitoso) {\n            _this.router.navigate(['/login']);\n          } else {\n            _this.showToast('Este usuario ya existe.');\n          }\n        } catch (error) {\n          console.error(error);\n          _this.showToast('Error al registrar usuario.');\n        }\n      })();\n    }\n    showToast(message) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const toast = yield _this2.toastCtrl.create({\n          message: message,\n          duration: 3000,\n          position: 'top'\n        });\n        yield toast.present();\n      })();\n    }\n    iraInicio() {\n      this.router.navigate(['/home']);\n    }\n    ngOnInit() {\n      this.cargarRegion();\n    }\n    cargarRegion() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const req = yield _this3.locationService.getRegion();\n        _this3.regiones = req.data;\n      })();\n    }\n    cargarComuna() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        _this4.seleccionComuna = false;\n        const req = yield _this4.locationService.getComuna(_this4.regionSel);\n        _this4.comunas = req.data;\n      })();\n    }\n    static #_ = this.ɵfac = function RegistroPage_Factory(t) {\n      return new (t || RegistroPage)(i0.ɵɵdirectiveInject(i1.NavController), i0.ɵɵdirectiveInject(i1.ToastController), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.LocationService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: RegistroPage,\n      selectors: [[\"app-registro\"]],\n      decls: 49,\n      vars: 12,\n      consts: [[1, \"ion-padding\"], [1, \"ion-text-center\", \"ion-padding\"], [1, \"titulo_principal\"], [1, \"ion-text-center\"], [1, \"titulo_secundario\"], [\"position\", \"floating\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", 3, \"ngModel\", \"ngModelChange\"], [\"label\", \"Seleccione una Regi\\u00F3n\", \"placeholder\", \"\", 3, \"ngModel\", \"ionChange\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"label\", \"Seleccione una Comuna\", \"placeholder\", \"\", 3, \"disabled\", \"ngModel\", \"ngModelChange\"], [1, \"ion-text-center\", \"ion-align-items-center\"], [\"color\", \"success\", 1, \"btn_registro\", 3, \"click\"], [1, \"div_volver\"], [1, \"link_volver\", 3, \"click\"], [3, \"value\"]],\n      template: function RegistroPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-content\", 0)(1, \"div\", 1)(2, \"ion-text\", 2);\n          i0.ɵɵtext(3, \"Vault-Tec\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"div\", 3)(5, \"ion-text\", 4);\n          i0.ɵɵtext(6, \"Registrarse\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(7, \"p\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"ion-item\")(9, \"ion-label\", 5);\n          i0.ɵɵtext(10, \"Rut\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"ion-input\", 6);\n          i0.ɵɵlistener(\"ngModelChange\", function RegistroPage_Template_ion_input_ngModelChange_11_listener($event) {\n            return ctx.rut = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"ion-item\")(13, \"ion-label\", 5);\n          i0.ɵɵtext(14, \"Nombre\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"ion-input\", 6);\n          i0.ɵɵlistener(\"ngModelChange\", function RegistroPage_Template_ion_input_ngModelChange_15_listener($event) {\n            return ctx.name = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"ion-item\")(17, \"ion-label\", 5);\n          i0.ɵɵtext(18, \"Apellido\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"ion-input\", 6);\n          i0.ɵɵlistener(\"ngModelChange\", function RegistroPage_Template_ion_input_ngModelChange_19_listener($event) {\n            return ctx.lname = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"ion-item\")(21, \"ion-label\", 5);\n          i0.ɵɵtext(22, \"Carrera\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"ion-input\", 6);\n          i0.ɵɵlistener(\"ngModelChange\", function RegistroPage_Template_ion_input_ngModelChange_23_listener($event) {\n            return ctx.car = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(24, \"ion-item\")(25, \"ion-label\", 5);\n          i0.ɵɵtext(26, \"Usuario\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"ion-input\", 6);\n          i0.ɵɵlistener(\"ngModelChange\", function RegistroPage_Template_ion_input_ngModelChange_27_listener($event) {\n            return ctx.username = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(28, \"ion-item\")(29, \"ion-label\", 5);\n          i0.ɵɵtext(30, \"Contrase\\u00F1a\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(31, \"ion-input\", 7);\n          i0.ɵɵlistener(\"ngModelChange\", function RegistroPage_Template_ion_input_ngModelChange_31_listener($event) {\n            return ctx.password = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(32, \"ion-item\")(33, \"ion-label\", 5);\n          i0.ɵɵtext(34, \"Confirme la contrase\\u00F1a\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"ion-input\", 7);\n          i0.ɵɵlistener(\"ngModelChange\", function RegistroPage_Template_ion_input_ngModelChange_35_listener($event) {\n            return ctx.cpassword = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(36, \"ion-item\")(37, \"ion-select\", 8);\n          i0.ɵɵlistener(\"ionChange\", function RegistroPage_Template_ion_select_ionChange_37_listener() {\n            return ctx.cargarComuna();\n          })(\"ngModelChange\", function RegistroPage_Template_ion_select_ngModelChange_37_listener($event) {\n            return ctx.regionSel = $event;\n          });\n          i0.ɵɵtemplate(38, RegistroPage_ion_select_option_38_Template, 2, 2, \"ion-select-option\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(39, \"ion-item\")(40, \"ion-select\", 10);\n          i0.ɵɵlistener(\"ngModelChange\", function RegistroPage_Template_ion_select_ngModelChange_40_listener($event) {\n            return ctx.comunaSel = $event;\n          });\n          i0.ɵɵtemplate(41, RegistroPage_ion_select_option_41_Template, 2, 2, \"ion-select-option\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(42, \"ion-content\")(43, \"div\", 11)(44, \"ion-button\", 12);\n          i0.ɵɵlistener(\"click\", function RegistroPage_Template_ion_button_click_44_listener() {\n            return ctx.registrarse();\n          });\n          i0.ɵɵtext(45, \"Registrarse\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(46, \"div\", 13)(47, \"a\", 14);\n          i0.ɵɵlistener(\"click\", function RegistroPage_Template_a_click_47_listener() {\n            return ctx.iraInicio();\n          });\n          i0.ɵɵtext(48, \"Volver al inicio\");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"ngModel\", ctx.rut);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.name);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.lname);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.car);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.username);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.password);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.cpassword);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngModel\", ctx.regionSel);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.regiones);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.seleccionComuna)(\"ngModel\", ctx.comunaSel);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.comunas);\n        }\n      },\n      dependencies: [i5.NgForOf, i6.NgControlStatus, i6.NgModel, i1.IonButton, i1.IonContent, i1.IonInput, i1.IonItem, i1.IonLabel, i1.IonSelect, i1.IonSelectOption, i1.IonText, i1.SelectValueAccessor, i1.TextValueAccessor],\n      styles: [\".btn_registro[_ngcontent-%COMP%]{margin-top:10px;margin-right:5px;margin-bottom:15px}.titulo_principal[_ngcontent-%COMP%]{font-size:55px}.titulo_secundario[_ngcontent-%COMP%]{font-size:25px}.div_volver[_ngcontent-%COMP%]{position:absolute;margin-top:100px;left:0;padding:10px}.link_volver[_ngcontent-%COMP%]{color:#fff;text-decoration:none}\"]\n    });\n  }\n  return RegistroPage;\n})();\nexport { RegistroPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}